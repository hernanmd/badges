"
Main Spec application class which mainly has two roles

- Store the badge variables.
- Has a reference to a configuration file.

"
Class {
	#name : #ShBadgesApp,
	#superclass : #SpApplication,
	#instVars : [
		'badgeUserVariables',
		'configurationFile'
	],
	#category : #'Badges-UI'
}

{ #category : #'world menu' }
ShBadgesApp class >> menuCommandOn: aBuilder [ 
	<worldMenu> 
	
	(aBuilder item: #'Badges')
		parent: #Tools;
		action:[ self new run ];
		icon: self taskbarIcon.
]

{ #category : #desktop }
ShBadgesApp class >> pharoLogoContents [

	^ 'logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABSCAYAAADHLIObAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAFKgAwAEAAAAAQAAAFIAAAAAbCbi6wAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAAE6RJREFUeNrtnAdUVNe6xw8oRRRRmihtQPrQB6QpjIBUKQojveNIVUCkiOBIR/ogvRuNBqMxIaIvKkRFYuzGq4TojUlMcmOSlZuiRmXOfG/vYUZHLprkvbz1lGGv9V9nz5w5B+bH1/Z3zoEg/h8GAMx6yT4xvP3yyy9Xnzx5UnPSPnG8vXHjhkVPTw9V+PPC+xsbG+eNjY15stlsNfRSnMViiRPTcfT19UlmZmbORVOxKWDw5keOHDE/ceLEqsn78bh27ZoPAqU6FeTu7m6Vmzdv+vf396vyf9YsYjoPBoMhuXnzZkUfHx8ZIVhPgXV2dsp+/vnn4Wg6F8NAVjUbv//FF18sHhkZCUXTOYJjBKDPnDmj9/HHHzPQ55VEAqJg0On02QimJvrCT61L2A0HBwfXXr9+3VT4mNu3b6/89ttv1+D50NDQbMH7yN1tLl26tC4sLGy+SEEUHsiF9Q4fPmzj6ekpxbfO2fwt5dTwcBRmbuq6LoCguPmfu/xJ2ZnBQTPh42/duuV+7ty5QDSVxjFR4OaiNnhu2dXVpX3+/Pm1Q0MjOoId+t5x2Zm1Pf92CM0cn+8YBT4phVDWc5hDXZt8Bu22wdBujo0F45iJ5hIoXMyatonlT2ZxHsza2trFyLriUWxcJe4Q1E04MiGiuBOsMuqBMIqDkLJeSGt5BwiHJKAyMn47eHSQPTZ2YzmGiGPoFBDFJmn6DwEEGoLS2ndkIL3jCKhGbeNEJGZw32hlcxuSg7gDh/dzGytLIZi5aTyhuQ+c0qsAuz0vJr6kpBIera2tElg4hk6uBqbLmLAmdXtrwjXmt/e7KuGb023kvw4lATkQA/BeCMCFKvj9nTD4sX8LjNUGjhcFOwNhzjiFjpLkn2PW3bt3cTaXQxl8YUhIyKKcnBzKrl27NFG5pRwdHb0gPT19Di6/BFXAaxsPsRVgYQvESYEvsadZ1jzc+2KGOTleQAC5ex2Xe7oaHg9VwaMT5WhbA4+PbYcnnf7AaVsNT/bEwNGuqvPvnjyd8tnoaAjK8qGofvT//vvvvVAWX4EqAgMUN+URQGlcbuEqQVTC5WyiokL2YZ7dP8kdrvBbnhP5oHk9PD5SA0+O1vH0uL8SHvVXwOOjtVzyaC18NrBn78DQiP+dW7dskRVqo3PIP7XuSQltOmRlMVzaYOvIy8tT7e3t1UMZ2vzhw4f29+/fd0Xu6HXhwgU/ZJWB/UeOhP66K+07TvMmeNCwiftgVzo8OlgLjw/VwyOk3/cWw/3iMPiNacJ9EKYIFQSxZRIsMX78E3+lYyBeJ+NCGMcYJpOJSw5J7DrotbSDg4Osm5ubcnJysmZHR4fOm2++abBnzx4TtGa2bG9vp2VkZFhs3brVHH3WFAV8k6tXr1JRcW1w7969paOjo5TD+/apmxUXq/60xvTOE08V+NWNIB+x82B8bz08bi3kbR81bYffS1Lg99xo7v0AUygjiHReQT4R98RfZXA4puEsJ5mamiqF5pIIpHRNTc0cBFLG19dXFm3lUBCXRzFogZ2d3Rwc9F8g8T/jZj9Zat56aKYIP5duI+/VlcNXqbHwZYQ/fJW9EX5kV8Kd1Y7w7aY47qOSXDhdWbaTECrAX+liHP9yuNjlw/jT7vyCOk5MOOkIhOof8ZylS3XKVVQS3yOIXy4lJ8HFrbncvejHv++3Bo4FMqAHzS/m58OH65nQSxDcwybG8GFGxtcX9u9vuXjixEomiyUzqTYVE5XkQvTx/zg1srIrWuXkftmPGHwQFganU1LgDSlpaEevT0RFwvsBAdCG5u84OcIVFgv6bGx4+7owaE1NGMjJ+eijK1fCzo+M2GNvmVzsT/9CHGdqNNrl5YP2oO894OX1ZDA8nIssDnokJbDlwWBwMByi06GbD+5ERAQMJyfzXu9esmR8n6Qk1BDEcSItbfHZU6ecz549G4gyOI1KpUqKDFAByAaCCDhmZ4dBkggQt3fOHOiVkYE3VFRgCIHcb2DAA9e7YAEP7nBSEhx2doZOghjvV1aGpsWLh9FpeK6dnZ0td/z4cdvTp097Hzt2jIqSkOR0K4VeuDQsZTDseh0crmNICCC3V06OFxP3GhnBqfh4eAO/P38+7F64kGeVfZaWcComhrsbWWOjtPSdAhmZREJHR0q4tZaUlDRvYGDA4uDBg46HDh3SE47x09JCNzOZiga5uQquBGHRNnfeL7sRsB5ZWS4G9haNBkOJidjyoFdREUGeC7sVFDBM7vtubtx+FxdgEkQUTlaZBDFXOJkJzh8RETG3u7vbYN++fTao7NJ43ZeHU1rju52dsix+MxYN2Uq5BXd75RZC50J5Lk4uB2zt4GhwCC/RdCsoQpfsfOiaNx+658txu+fIkMe8vKDJxNx/inAhNrlRjGMmArkUJSMqkuokN58WFiqdJL9EvURe2b1modIPnQqLoE1JhdtMiMNBFzc46OoGLQhku+IiaF+oCO0LFKBdXgnaxCXJffoG0Ovm0ZJHEMtzFRQMBHFyMhxhC8X1cEVFxZL6+nrd0tJShde+ERw3X96jWmFJU7my6pkqZdV7rYvUoUVZDZqQWpZoQgPy0MOBwbDHxh6aJGXRviXQoriYp1ZFFWjFr+cu5L5lRoP9ugZQN1fulyp55XPVCxUrrKWltaeytEmxcVZlZaVyVlaWGu4MvVZWCfxftmixVi9bTQfa1XWhQ10HmlSXQsMSbS57iRbaakGjhi7Uoo+/F58A7TRbaJinBI2LKdCooomkAY2LNKAJgeeL7DY257SheYeyKuxH+wvlF72FV1Lw5+DMxiATEhKUcYJ6LYCy+J2ZAjWdjlZtY6jTNHxQo2EwXquhz0WCOqR6LIoB1MqpwdvhMdBkZg11SprAVtOFegSfrbYU2KpY2tCAtyoUaNIygGZd6ngjmuM/RKKcYjwGwvjj1ZgwNPHY2FjZtLQ0Xt/ytbBINJQKNA2vtOhZQu1SM6jSNiaRoBqpRtsEqjQMgU21gr0+DKjTMwMEG2ooRkiGUKtp8Ezo/TqkenU9bhv63E5N/UdZSmqoLCXkUglC6n+aBHEfAWd7HE9feZgeCyiUZFWdNNZSs7EafSuo0LUkd+paQiWCW65mCI2O7tDlHQg71Y2gUtccKhHwyqWmUIWljWXCE4JP1qJtrqruPid19RW4JxlNUKT/BhcVwyAxUNzleiVdflLsUsvXsxquotpDmYENp9zIllukagxNngHQ6hsExSqGUGFkA+UINlaFPg0q9LAQcF0LsgbNC7RMPkXnwVcgxVNRYf43f2kx3CrEVspv3rx6MFn89XC4NjWg1NQRypHwlqVFA7YnAxp9QmCHpgWUmiyHEiN7KDWy48sWSg1tyDJDmyeNpisgT9eyH5dRfULr6/+D8UrfRySwHJU0Q7sP882cfkD6iUVdAbUe66DaLRC2G9hDoTkdCk2dkByhyHQFt8jUkVNmRkfQnWCLvtWwi6LqSnQOSdZ/XmYQqSHoHcr4U0yis8ydv2NZe0CtbwS30NYLCixcYTttFRRYunBZli6cQstVUGLlBrmmK74I1zbJQMctQZKiE6JzcWvKIYg7gQZW9Cxrz5+32/pCvr0fWR0YD1tpHrDNxgvylnly8pd5Q5GdL2TT3H6NN7Ctx6s+HkAKRVrkIQpcka5jo7bZzvfrAsd1kGXvz8l1DIDyACZk2/pycu39udtXBEKm7WpOgtnKtwyV1B2x9XoiiEwaTWJat8f+ahtt/bLV1fmukZDpGPQkE8HcQg/ilgQmcHKdgiELvU6w9jjuSjH3Qx/FDQ4pz4nMLD4D8XkAkvH2a89mu8VAuks4mbYylJPnw4QCvwRIsFtzzcvANhoX8EgS0RS6NPF8QhHMFalK1HkiDTKa7r8gZVXMd5vc42CTeyyZ7h4PWQGJP0fS1yLPJygYNB0BnFzDCV576tjM97fybJgzZ46qqFoo7wszHBlaSV4bOKneibBxdSKEr1j3vt0yO3dCkZDVeT4OPj2ORX/WnI12jtgb5xr527x584yE464IJZqJ+LjSfKVDot9GiPdOIH3t/bEVyrutcVNm0BmTXVVM2CqXU2kaEW5xR1PXpAPTO5G71mHdysnNXJFKNKvsfBlx/mngbuO7CScSH5qPjKurq5wwtEluPWuNc0RCjG/KveTALFjvn/Y4hZEFwS4xQSIJUgDHgx6Ss9Yjbh+GyLBjzMENAiReG4tOf+76yiw/t5jAcP+N55lBW4G5LhdiAzI5cUiJwXngSw/ZLJoWyXdtp+UBTFUtKr4vHMdCMXxPEe64CH1Uwsc9LjQ0YMtHsSH5EB+2HaKDt5LRQVvJGAQTicMMKwCvlaHVvPgpqrc/q6joKFEovLYX7x5w+rOrfBKrVydFBjFyLkdFFEFsVAlEhm0nI5AiQwvgqUK2ceIii8DNJbJFcA5RXijOYjCePtIh7uO3KTQwpOBCREw5RMXuhLDIYjI0spgTioCGIWhhEYVIvC0ZEVlIRkWVgrNzRIRIWyQh9MWXu8XT1kUVHw9bXwNhzFoIjq0gg2PKseCZyiA4GimqlBOKQaPPevls7ECHK9BoTAlRXSQ+hejKyM5ZG1c5HrGxBRjra0gkDiO+GgRaF1+FxV0XV0kGxVeRYYkNEBBV8tjVJ7UcHb6ITqf/HV3x13qJSHhHl/UwUtsgIKkJadf42oQGWJvAhrUb2BDAUz0EMOs4aM4NSm7Bc/AKyT9pSPP2RofPtbPjZXlxEfXoiQvzLuE7dgZu3g1+Ka3jfsnNJBL489QEfonNXP+kJg4Sl5HWBf6Ju8AzsnTE2jkCr7+VeQ0Mz1QpUbVEQpBYHALyrLySWzg+CBIKcyQSTKgdfFLbSF80X4Mg+6S2wqqo8lPWXokxONHj9bcOAjjFkwpiImmNjrGV2/3yDoJneu8Tr/RewPJO7ya9M3pI36z94LWpA1ziqgdNV8WE4DiINNtzaoBogOi205bHVh7wzjsE7pl7SPfMvVyPzD0cr9wD4Jm1D+gb2CNm3on4UWNFbIFU3rMyL76TjMpgSSppG+qKopvPckrvvuS+7TC4ZveNr8IAt/cDfWP7bYuArI1o/2IM0NOTLfWyy6CCAt4mNJ/mEFXWjo8hROSWZ96XNI2onOu87Z0fnPPegVWsI7Ayaz9nWXxNM9pliGFQ6NHSL7PACYhPbyyVcc7YfdkxueUG34JFIV5OWMti2zWGjvnvPnApOQkOW968rePBZOBShkKhS9OYrRJ/VMQz+I/dobpHfUV677AnPs/GtjsoheuJRszkr2S0Vyd7ORYdh2XpPYOE4IpgNEuaeNkSjwfw2ZOwlhvYPsuz37rris6zMv89jlPu24+MI4qtJjhOc5CC0scspTXHIrXzJDFxXVoaJ4uXhQMhNyZU6WFqyzL3djgWHgOn4hPgyBrgrGAdIeklJ8Aike06eek5rUGapHZsUPNIxP+zYtYL18hCLswf8haZb2Tbso784Fg5Ag4lJ7j2RR+QDkUfABLpWHEKjKLKwkQC5ESW4NWBeGUiTUyVkZFbCrswbkiYbNmTZVV47LZD7QWw2zkMtuUfcmzLh7i2ZUNgVzoEtqWDpAOCaxBZmiE6IJ9m1ElxDFur0D3dixwZWtTct3dYlg1+Y1N/GWzqLoH1zrPj1pVnudaVw7AMAV1WgXUGi7StOQ96sVVlogTypUlELXSbrjHraL1ZxekfrJtHgca+ArTa8xzL6o9JSwSLVv0x0rnnZFU1wrFhXwW9Dbt28f5QLNH6byvPubBGVCHVsOR4k0nN+QcWrZ+BRdMNMGNfGUfimiOLfKZLYF6HdREskMxrL5KW9Ze5lmiuGV4cNgFSVCxSyGIWBeRo65cNNVPrL9836/4KTJAVmjTe4Bg3/oM0abwOJrsE+oQn0waBrnERZI4ZAm6OjtHLOdCITrfgD+vQaTOeZWLJpUXH84zYV/9t2vsNGLffAmrz6Di15VMuElBbRvHrSboJ1KabYNx0k2OM5qYIPLX2wkOtlM58nNUJtCISjfU23xLV4mp0DKrOfWTS8zUC+E8E7VPOM4AvFNo/xqG2jnHxcUbIEnWLj/+Xgnsirh1l1Bi8pxFEAeJE3FocmqdpWHfxK2yFCA6ywNE/Btg8yjFuvw0m3Xd5Vqlb9uEptfg63B1SwKsinVS2CDV4+daoVzq423T3v7DrPnkZQKPmURJZIIkBmu7+FgzZVx7plQ4dXRS2I4jfn5SgRHdPXYuKwJBAkO7y3XkKSxzFW9K4dYxjguKfcecdDPAnnYL+LqXAbE+cTCb6kyxJ4WWjSJU6/K26UeM/fjTumBLkRPzr+hKMOz4Hg+pzY9o5B8ollmhaouPwTVWzdVIHpETVAp+Lj3LLfK2MGq49wO4qBJLnwiY9KP61joFexfBljdQu3NzVJyZuZZGisvokCUafCAMUXv6hoRK+w9uw4Rpp3HbrmQt3fQEYrN7OM+fUEtjr+R0hSQLVgzyAM7c3P2eRvHimlbUvDluhccvYOBWtXnAcNKgc+Uw9uT0Zd8gmEghLeiL+wQzA/2j4DE38p1LDxut5uITBMdCw4eoTrdy38aMeeoISRnRWJf9bkLs+qTU/8CvoV537VJmRg/9f7lwCWSAf4IwF/mHG5rf+9as+ek9/5zB+CJN3eYHCGpKeAfjXSx85jZS2OuU12fjG0tn8RDIz/ipIjdCchVJSvMeBZ83Ewr+jnpypB/9WN58ZM2NmzIyZMTNmxp8d/w3hPifqKoT6/AAAAABJRU5ErkJggg=='
]

{ #category : #accessing }
ShBadgesApp >> badgeUserVariables [
	"Answer a <Dictionary> mapping the application's badge variable names and its values"

	^ badgeUserVariables
		ifNil: [ badgeUserVariables := Dictionary new ]
]

{ #category : #accessing }
ShBadgesApp >> badgeUserVariables: anObject [

	badgeUserVariables := anObject
]

{ #category : #accessing }
ShBadgesApp >> badgeUserVariablesAt: aVariableName [

	^ self badgeUserVariables 
		at: aVariableName
		ifAbsent: [ String empty ]
]

{ #category : #accessing }
ShBadgesApp >> badgeUserVariablesAt: aVariableName ifAbsent: aBlock [

	^ self badgeUserVariables 
		at: aVariableName
		ifAbsent: aBlock
]

{ #category : #accessing }
ShBadgesApp >> badgeUserVariablesAt: aVariableName put: aString [

	^ self badgeUserVariables 
		at: aVariableName
		put: aString
]

{ #category : #accessing }
ShBadgesApp >> configurationFile [
	"Answer a default <FileReference> for storing user defined badge variables"

	^ configurationFile
		ifNil: [ configurationFile := self defaultConfigurationFile ]
]

{ #category : #accessing }
ShBadgesApp >> configurationFile: anObject [

	configurationFile := anObject
]

{ #category : #accessing }
ShBadgesApp >> defaultConfigurationFile [
	"Answer a default <FileReference> for storing user defined badge variables"

	^ (StartupPreferencesLoader preferencesGeneralFolder / 'shBadgesConfig.ston') asFileReference
]

{ #category : #accessing }
ShBadgesApp >> deleteDefinedVariables [ 
	"Remove the user defined variables in a configuration file"

	badgeUserVariables := nil.
	self saveDefinedVariables.
]

{ #category : #accessing }
ShBadgesApp >> loadDefinedVariables [
	"Load user defined files from the default configuration file"

	| data |
	data := STON fromStream: self configurationFile readStream.
	^ data
]

{ #category : #accessing }
ShBadgesApp >> saveDefinedVariables [ 
	"Save the user defined variables in a configuration file"

	self configurationFile writeStreamDo: [ :out | 
		(STON writer on: out) nextPut: self badgeUserVariables ].
]

{ #category : #running }
ShBadgesApp >> start [
	" Private - See superimplementor's comment "

	(ShBadgesPresenter newApplication: self) open.
]
